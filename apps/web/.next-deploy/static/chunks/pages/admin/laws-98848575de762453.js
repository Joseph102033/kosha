(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[659],{2226:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let s=a(4232),r=s.useLayoutEffect,l=s.useEffect;function n(e){let{headManager:t,reduceComponentsToState:a}=e;function n(){if(t&&t.mountedInstances){let r=s.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(a(r,e))}}return r(()=>{var a;return null==t||null==(a=t.mountedInstances)||a.add(e.children),()=>{var a;null==t||null==(a=t.mountedInstances)||a.delete(e.children)}}),r(()=>(t&&(t._pendingUpdate=n),()=>{t&&(t._pendingUpdate=n)})),l(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},3169:(e,t)=>{"use strict";function a(e){let{ampFirst:t=!1,hybrid:a=!1,hasQuery:s=!1}=void 0===e?{}:e;return t||a&&s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isInAmpMode",{enumerable:!0,get:function(){return a}})},4461:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AmpStateContext",{enumerable:!0,get:function(){return s}});let s=a(4252)._(a(4232)).default.createContext({})},6650:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/laws",function(){return a(8767)}])},7328:(e,t,a)=>{e.exports=a(9269)},8767:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var s=a(7876),r=a(4232),l=a(7328),n=a.n(l);let d="http://localhost:8787";function i(){let[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)(""),[i,c]=(0,r.useState)(1),[o,x]=(0,r.useState)(20),[u,m]=(0,r.useState)(!1),[p,h]=(0,r.useState)(null),[g,b]=(0,r.useState)(null),[f,y]=(0,r.useState)([]),[j,v]=(0,r.useState)(null),[N,w]=(0,r.useState)(null);(0,r.useEffect)(()=>{_(),k()},[]),(0,r.useEffect)(()=>{S()},[e,a,i,o]);let _=async()=>{try{let e=await fetch("".concat(d,"/api/laws/titles")),t=await e.json();t.success&&y(t.data)}catch(e){console.error("Failed to fetch titles:",e)}},k=async()=>{try{let e=await fetch("".concat(d,"/api/laws/stats")),t=await e.json();t.success&&b(t.data)}catch(e){console.error("Failed to fetch stats:",e)}},S=async()=>{m(!0),v(null);try{let t=new URLSearchParams({page:i.toString(),limit:o.toString()});e.trim()&&t.set("query",e.trim()),a&&t.set("law_title",a);let s=await fetch("".concat(d,"/api/laws/search?").concat(t)),r=await s.json();r.success?h(r.data):v(r.error||"Failed to search laws")}catch(e){v(e instanceof Error?e.message:"Failed to fetch laws")}finally{m(!1)}},C=()=>{w(null)};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"법령 검색 - Safe OPS Studio Admin"}),(0,s.jsx)("meta",{name:"description",content:"산업안전보건법 조문 검색 및 열람"})]}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"산업안전보건 법령 검색"}),(0,s.jsx)("p",{className:"text-gray-600",children:"산업안전보건법 및 관련 규칙 조문을 검색하고 열람할 수 있습니다 (읽기 전용)"})]}),g&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"총 조문 수"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:g.total_laws})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"법령 종류"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-green-600",children:g.total_titles})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"최신 시행일"}),(0,s.jsx)("div",{className:"text-3xl font-bold text-purple-600",children:g.latest_effective_date.split("-")[0]})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6 border border-gray-200",children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c(1),S()},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"키워드 검색 (법령명, 조문 내용, 키워드)"}),(0,s.jsx)("input",{type:"text",id:"search",value:e,onChange:e=>t(e.target.value),placeholder:"예: 추락, 안전난간, 제38조 등",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"law-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"법령명 필터"}),(0,s.jsxs)("select",{id:"law-title",value:a,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"전체"}),f.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"submit",disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium",children:u?"검색 중...":"검색"}),(0,s.jsx)("button",{type:"button",onClick:()=>{t(""),l(""),c(1)},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"초기화"})]})]})}),j&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-red-800",children:["⚠️ ",j]})}),p&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"검색 결과"}),(0,s.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(총 ",p.total,"건, ",p.page,"/",p.total_pages," 페이지)"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("label",{className:"text-sm text-gray-600",children:"페이지 크기:"}),(0,s.jsxs)("select",{value:o,onChange:e=>{x(Number(e.target.value)),c(1)},className:"px-3 py-1 border border-gray-300 rounded text-sm",children:[(0,s.jsx)("option",{value:"10",children:"10"}),(0,s.jsx)("option",{value:"20",children:"20"}),(0,s.jsx)("option",{value:"50",children:"50"}),(0,s.jsx)("option",{value:"100",children:"100"})]})]})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-200",children:0===p.laws.length?(0,s.jsx)("div",{className:"px-6 py-12 text-center text-gray-500",children:"검색 결과가 없습니다. 다른 키워드로 검색해보세요."}):p.laws.map(e=>(0,s.jsxs)("div",{className:"px-6 py-4 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{w(e)},children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full mr-2",children:e.law_title}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[e.article_no,e.clause_no&&" ".concat(e.clause_no)]})]}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.effective_date})]}),(0,s.jsx)("p",{className:"text-sm text-gray-700 line-clamp-2 mb-2",children:e.text}),(0,s.jsx)("div",{className:"flex flex-wrap gap-1",children:e.keywords.split(",").map((e,t)=>(0,s.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:e},t))})]},e.id))}),p.total_pages>1&&(0,s.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between items-center",children:[(0,s.jsx)("button",{onClick:()=>c(e=>e-1),disabled:!p.has_prev,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors",children:"이전"}),(0,s.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,p.total_pages)},(e,t)=>{let a=p.total_pages<=5?t+1:Math.max(1,Math.min(p.page-2+t,p.total_pages-4+t));return(0,s.jsx)("button",{onClick:()=>c(a),className:"px-3 py-1 rounded ".concat(a===p.page?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:a},a)})}),(0,s.jsx)("button",{onClick:()=>c(e=>e+1),disabled:!p.has_next,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed transition-colors",children:"다음"})]})]}),N&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:C,children:(0,s.jsxs)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"조문 상세"}),(0,s.jsx)("button",{onClick:C,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,s.jsxs)("div",{className:"px-6 py-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"법령명"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N.law_title})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"조항"}),(0,s.jsxs)("p",{className:"text-gray-900",children:[N.article_no,N.clause_no&&" ".concat(N.clause_no)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"시행일"}),(0,s.jsx)("p",{className:"text-gray-900",children:N.effective_date})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"조문 내용"}),(0,s.jsx)("p",{className:"text-gray-800 leading-relaxed whitespace-pre-wrap bg-gray-50 p-4 rounded border border-gray-200",children:N.text})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"키워드"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2 mt-1",children:N.keywords.split(",").map((e,t)=>(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:e},t))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"원문 링크"}),(0,s.jsx)("a",{href:N.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline block mt-1",children:N.source_url})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 pt-4 border-t border-gray-200",children:["법령 코드: ",N.law_code," | 등록일: ",N.created_at.split("T")[0]]})]})]})})]})]})}},9269:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return h},defaultHead:function(){return x}});let s=a(4252),r=a(8365),l=a(7876),n=r._(a(4232)),d=s._(a(2226)),i=a(4461),c=a(7965),o=a(3169);function x(e){void 0===e&&(e=!1);let t=[(0,l.jsx)("meta",{charSet:"utf-8"},"charset")];return e||t.push((0,l.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")),t}function u(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===n.default.Fragment?e.concat(n.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}a(6201);let m=["name","httpEquiv","charSet","itemProp"];function p(e,t){let{inAmpMode:a}=t;return e.reduce(u,[]).reverse().concat(x(a).reverse()).filter(function(){let e=new Set,t=new Set,a=new Set,s={};return r=>{let l=!0,n=!1;if(r.key&&"number"!=typeof r.key&&r.key.indexOf("$")>0){n=!0;let t=r.key.slice(r.key.indexOf("$")+1);e.has(t)?l=!1:e.add(t)}switch(r.type){case"title":case"base":t.has(r.type)?l=!1:t.add(r.type);break;case"meta":for(let e=0,t=m.length;e<t;e++){let t=m[e];if(r.props.hasOwnProperty(t))if("charSet"===t)a.has(t)?l=!1:a.add(t);else{let e=r.props[t],a=s[t]||new Set;("name"!==t||!n)&&a.has(e)?l=!1:(a.add(e),s[t]=a)}}}return l}}()).reverse().map((e,t)=>{let a=e.key||t;return n.default.cloneElement(e,{key:a})})}let h=function(e){let{children:t}=e,a=(0,n.useContext)(i.AmpStateContext),s=(0,n.useContext)(c.HeadManagerContext);return(0,l.jsx)(d.default,{reduceComponentsToState:p,headManager:s,inAmpMode:(0,o.isInAmpMode)(a),children:t})};("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}},e=>{e.O(0,[636,593,792],()=>e(e.s=6650)),_N_E=e.O()}]);