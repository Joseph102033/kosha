(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[338],{301:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var s=n(7876),a=n(4232),l=n(7328),c=n.n(l),i=n(8230),r=n.n(i);let o=JSON.parse('{"vM":[{"id":"CASE-001","description":"비계 작업 중 추락사고 (안전난간 미설치)","incident_type":"Fall","incident_cause":"3층 비계 작업 중 안전난간 미설치 구간에서 추락. 안전대 미착용 상태.","keywords":["추락","비계","안전난간","안전대"],"relevant_laws":["산업안전보건기준에 관한 규칙 제42조","산업안전보건기준에 관한 규칙 제56조","산업안전보건법 제38조"]},{"id":"CASE-002","description":"화학물질 누출 사고 (MSDS 미비치)","incident_type":"Chemical Spill","incident_cause":"화학물질 취급 중 용기 파손으로 누출. MSDS 미비치 및 보호구 미착용.","keywords":["화학물질","누출","MSDS","보호구"],"relevant_laws":["산업안전보건법 제110조","산업안전보건기준에 관한 규칙 제420조","산업안전보건기준에 관한 규칙 제32조"]},{"id":"CASE-003","description":"기계 끼임 사고 (안전장치 제거)","incident_type":"Equipment Failure","incident_cause":"프레스 기계 작동 중 손가락 끼임. 안전덮개 제거 상태로 작업.","keywords":["끼임","기계","프레스","안전장치"],"relevant_laws":["산업안전보건법 제33조","산업안전보건기준에 관한 규칙 제84조","산업안전보건기준에 관한 규칙 제88조"]},{"id":"CASE-004","description":"감전 사고 (전기작업 미교육)","incident_type":"Other","incident_cause":"전기 설비 점검 중 감전. 작업자 특별교육 미실시.","keywords":["감전","전기","특별교육","점검"],"relevant_laws":["산업안전보건법 제38조","산업안전보건기준에 관한 규칙 제301조","산업안전보건기준에 관한 규칙 제304조"]},{"id":"CASE-005","description":"밀폐공간 질식 사고 (산소농도 측정 미실시)","incident_type":"Other","incident_cause":"지하 탱크 내부 작업 중 질식. 산소농도 측정 및 환기 미실시.","keywords":["밀폐공간","질식","산소농도","환기"],"relevant_laws":["산업안전보건법 제118조","산업안전보건기준에 관한 규칙 제619조","산업안전보건기준에 관한 규칙 제622조"]},{"id":"CASE-006","description":"중량물 낙하 사고 (와이어로프 파단)","incident_type":"Fall","incident_cause":"크레인 작업 중 와이어로프 파단으로 중량물 낙하. 정기검사 미실시.","keywords":["낙하","크레인","와이어로프","정기검사"],"relevant_laws":["산업안전보건법 제93조","산업안전보건기준에 관한 규칙 제136조","산업안전보건기준에 관한 규칙 제142조"]},{"id":"CASE-007","description":"화재 사고 (용접작업 중 불티)","incident_type":"Fire","incident_cause":"용접작업 중 불티가 인근 가연물에 착화하여 화재 발생. 화기작업 허가 미취득.","keywords":["화재","용접","불티","화기작업허가"],"relevant_laws":["산업안전보건기준에 관한 규칙 제241조","산업안전보건기준에 관한 규칙 제243조","산업안전보건법 제38조"]},{"id":"CASE-008","description":"차량 충돌 사고 (신호수 미배치)","incident_type":"Other","incident_cause":"건설현장 내 지게차와 작업자 충돌. 신호수 미배치 및 통행로 미분리.","keywords":["차량","지게차","신호수","통행로"],"relevant_laws":["산업안전보건기준에 관한 규칙 제38조","산업안전보건기준에 관한 규칙 제172조","산업안전보건기준에 관한 규칙 제175조"]},{"id":"CASE-009","description":"폭발 사고 (가스 누출)","incident_type":"Explosion","incident_cause":"LPG 가스 누출 후 점화원에 의해 폭발. 가스 누출 감지기 미설치.","keywords":["폭발","가스","누출","감지기"],"relevant_laws":["산업안전보건기준에 관한 규칙 제230조","산업안전보건기준에 관한 규칙 제232조","산업안전보건기준에 관한 규칙 제234조"]},{"id":"CASE-010","description":"고소작업대 전도 사고 (지반 침하)","incident_type":"Fall","incident_cause":"고소작업대 작업 중 지반 침하로 전도. 지반 안전성 검토 미실시.","keywords":["고소작업대","전도","지반","안전성"],"relevant_laws":["산업안전보건기준에 관한 규칙 제42조","산업안전보건기준에 관한 규칙 제157조","산업안전보건법 제38조"]},{"id":"CASE-011","description":"옥외 추락 사고 (개구부 덮개 미설치)","incident_type":"Fall","incident_cause":"건물 옥외 개구부에서 추락. 안전난간 및 덮개 미설치.","keywords":["추락","개구부","덮개","안전난간"],"relevant_laws":["산업안전보건기준에 관한 규칙 제13조","산업안전보건기준에 관한 규칙 제42조","산업안전보건법 제38조"]},{"id":"CASE-012","description":"분진 폭발 사고 (환기 불량)","incident_type":"Explosion","incident_cause":"목재 가공 시설 내 분진 축적 후 폭발. 환기시설 미가동.","keywords":["분진","폭발","환기","목재"],"relevant_laws":["산업안전보건기준에 관한 규칙 제228조","산업안전보건기준에 관한 규칙 제229조","산업안전보건기준에 관한 규칙 제230조"]},{"id":"CASE-013","description":"작업발판 붕괴 사고 (과적재)","incident_type":"Fall","incident_cause":"작업발판에 자재 과적재로 붕괴. 적재하중 초과.","keywords":["작업발판","붕괴","과적재","적재하중"],"relevant_laws":["산업안전보건기준에 관한 규칙 제55조","산업안전보건기준에 관한 규칙 제56조","산업안전보건법 제38조"]},{"id":"CASE-014","description":"유해광선 화상 사고 (용접작업 보호구 미착용)","incident_type":"Other","incident_cause":"용접작업 중 눈 보호구 미착용으로 유해광선 노출. 안전교육 미실시.","keywords":["용접","유해광선","보호구","눈"],"relevant_laws":["산업안전보건기준에 관한 규칙 제32조","산업안전보건기준에 관한 규칙 제254조","산업안전보건법 제38조"]},{"id":"CASE-015","description":"이동식 사다리 추락 사고 (고정 미실시)","incident_type":"Fall","incident_cause":"이동식 사다리 작업 중 미끄러져 추락. 사다리 하단 고정 미실시.","keywords":["사다리","추락","고정","미끄러짐"],"relevant_laws":["산업안전보건기준에 관한 규칙 제58조","산업안전보건기준에 관한 규칙 제59조","산업안전보건법 제38조"]},{"id":"CASE-016","description":"양중기 전도 사고 (아웃트리거 미설치)","incident_type":"Equipment Failure","incident_cause":"이동식 크레인 작업 중 전도. 아웃트리거 미설치 상태로 작업.","keywords":["크레인","전도","아웃트리거","양중기"],"relevant_laws":["산업안전보건기준에 관한 규칙 제139조","산업안전보건기준에 관한 규칙 제140조","산업안전보건법 제93조"]},{"id":"CASE-017","description":"굴착작업 매몰 사고 (흙막이 지보공 미설치)","incident_type":"Other","incident_cause":"지하 굴착작업 중 토사 붕괴로 매몰. 흙막이 지보공 미설치.","keywords":["굴착","매몰","흙막이","지보공"],"relevant_laws":["산업안전보건기준에 관한 규칙 제335조","산업안전보건기준에 관한 규칙 제340조","산업안전보건법 제38조"]},{"id":"CASE-018","description":"산소결핍 사고 (하수도 작업)","incident_type":"Other","incident_cause":"하수도 맨홀 내부 작업 중 산소결핍으로 쓰러짐. 산소농도 측정 미실시.","keywords":["산소결핍","하수도","맨홀","측정"],"relevant_laws":["산업안전보건법 제118조","산업안전보건기준에 관한 규칙 제619조","산업안전보건기준에 관한 규칙 제620조"]},{"id":"CASE-019","description":"컨베이어 벨트 끼임 사고 (비상정지장치 고장)","incident_type":"Equipment Failure","incident_cause":"컨베이어 벨트 점검 중 손 끼임. 비상정지장치 고장 상태.","keywords":["컨베이어","끼임","비상정지","점검"],"relevant_laws":["산업안전보건기준에 관한 규칙 제84조","산업안전보건기준에 관한 규칙 제93조","산업안전보건법 제33조"]},{"id":"CASE-020","description":"건축물 해체 낙하 사고 (낙하물 방지망 미설치)","incident_type":"Fall","incident_cause":"건축물 해체 작업 중 부재 낙하. 낙하물 방지망 및 출입금지 조치 미실시.","keywords":["해체","낙하","방지망","출입금지"],"relevant_laws":["산업안전보건기준에 관한 규칙 제42조","산업안전보건기준에 관한 규칙 제44조","산업안전보건법 제38조"]}]}');function d(e,t,n){if(n<=0||0===e.length)return 0;let s=e.slice(0,n),a=new Set(t);return s.filter(e=>a.has(e)).length/s.length}function x(e,t,n){if(0===t.length)return 1;if(n<=0||0===e.length)return 0;let s=e.slice(0,n),a=new Set(t);return s.filter(e=>a.has(e)).length/t.length}function h(e,t,n){let s=d(e,t,n),a=x(e,t,n);return s+a===0?0:2*s*a/(s+a)}function m(e,t){if(0===t.length||0===e.length)return 0;let n=new Set(t);for(let t=0;t<e.length;t++)if(n.has(e[t]))return 1/(t+1);return 0}function p(e,t,n){if(0===t.length)return 1;if(n<=0||0===e.length)return 0;let s=e.slice(0,n),a=new Set(t),l=0;for(let e=0;e<s.length;e++)a.has(s[e])&&(l+=1/Math.log2(e+2));let c=0,i=Math.min(t.length,n);for(let e=0;e<i;e++)c+=1/Math.log2(e+2);return 0===c?0:l/c}let g={width:600,height:300,margin:{top:20,right:30,bottom:50,left:50},lineColor:"#3b82f6",pointColor:"#2563eb",gridColor:"#e5e7eb",textColor:"#6b7280"};function u(e,t){let[n,s]=e,[a,l]=t,c=(l-a)/(s-n);return e=>a+c*(e-n)}function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{width:s,height:a,margin:l,lineColor:c,pointColor:i,gridColor:r,textColor:o}={...g,...n},d=s-l.left-l.right,x=a-l.top-l.bottom;if(0===e.length)return'\n      <svg width="'.concat(s,'" height="').concat(a,'" xmlns="http://www.w3.org/2000/svg">\n        <text x="').concat(s/2,'" y="').concat(a/2,'" text-anchor="middle" fill="').concat(o,'">\n          데이터 없음\n        </text>\n      </svg>\n    ');let h=u([0,e.length-1],[0,d]),m=u([0,1],[x,0]),p=[];for(let e=0;e<=1;e+=.2){let t=l.top+m(e);p.push('<line x1="'.concat(l.left,'" y1="').concat(t,'" x2="').concat(l.left+d,'" y2="').concat(t,'" stroke="').concat(r,'" stroke-width="1" stroke-dasharray="4,4"/>')),p.push('<text x="'.concat(l.left-10,'" y="').concat(t+5,'" text-anchor="end" font-size="12" fill="').concat(o,'">').concat(e.toFixed(1),"</text>"))}let y=e.map((e,t)=>{let n=l.left+h(t),s=l.top+m(e.value);return"".concat(0===t?"M":"L"," ").concat(n,",").concat(s)}).join(" "),f=e.map((e,t)=>{let n=l.left+h(t),s=l.top+m(e.value);return'\n      <circle cx="'.concat(n,'" cy="').concat(s,'" r="4" fill="').concat(i,'"/>\n      <text x="').concat(n,'" y="').concat(s-10,'" text-anchor="middle" font-size="11" fill="').concat(o,'" font-weight="600">\n        ').concat((100*e.value).toFixed(1),"%\n      </text>\n    ")}).join(""),_=e.map((e,t)=>{let n=l.left+h(t),s=a-l.bottom+20;return'\n      <g>\n        <text x="'.concat(n,'" y="').concat(s,'" text-anchor="middle" font-size="11" fill="').concat(o,'" font-weight="600">\n          ').concat(e.version,'\n        </text>\n        <text x="').concat(n,'" y="').concat(s+15,'" text-anchor="middle" font-size="9" fill="').concat(o,'">\n          ').concat(e.date,"\n        </text>\n      </g>\n    ")}).join("");return'\n    <svg width="'.concat(s,'" height="').concat(a,'" xmlns="http://www.w3.org/2000/svg">\n      \x3c!-- 제목 --\x3e\n      <text x="').concat(s/2,'" y="15" text-anchor="middle" font-size="14" font-weight="700" fill="#111827">\n        ').concat(t," 추세\n      </text>\n\n      \x3c!-- 그리드 라인 --\x3e\n      ").concat(p.join("\n"),'\n\n      \x3c!-- Y축 라인 --\x3e\n      <line x1="').concat(l.left,'" y1="').concat(l.top,'" x2="').concat(l.left,'" y2="').concat(l.top+x,'" stroke="').concat(o,'" stroke-width="2"/>\n\n      \x3c!-- X축 라인 --\x3e\n      <line x1="').concat(l.left,'" y1="').concat(l.top+x,'" x2="').concat(l.left+d,'" y2="').concat(l.top+x,'" stroke="').concat(o,'" stroke-width="2"/>\n\n      \x3c!-- 데이터 라인 --\x3e\n      <path d="').concat(y,'" fill="none" stroke="').concat(c,'" stroke-width="2"/>\n\n      \x3c!-- 데이터 포인트 --\x3e\n      ').concat(f,"\n\n      \x3c!-- X축 레이블 --\x3e\n      ").concat(_,'\n\n      \x3c!-- Y축 제목 --\x3e\n      <text x="').concat(l.left-35,'" y="').concat(l.top+x/2,'" text-anchor="middle" font-size="12" fill="').concat(o,'" transform="rotate(-90, ').concat(l.left-35,", ").concat(l.top+x/2,')">\n        점수\n      </text>\n\n      \x3c!-- X축 제목 --\x3e\n      <text x="').concat(l.left+d/2,'" y="').concat(a-5,'" text-anchor="middle" font-size="12" fill="').concat(o,'">\n        룰셋 버전\n      </text>\n    </svg>\n  ')}let f="http://localhost:8787";function _(){let[e,t]=(0,a.useState)(!1),[n,l]=(0,a.useState)(null),[i,_]=(0,a.useState)([]),[v,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),[S,C]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("eval_history");if(e)try{_(JSON.parse(e))}catch(e){console.error("Failed to load history:",e)}},[]);let k=async()=>{t(!0),C(null);try{let t=[];for(let e of o.vM)try{let n=await fetch("".concat(f,"/api/law/suggest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({incidentType:e.incident_type,incidentCause:e.incident_cause})}),s=await n.json();if(s.success&&s.data&&s.data.laws){let n=s.data.laws.map(e=>e.title);t.push({id:e.id,description:e.description,incidentType:e.incident_type,incidentCause:e.incident_cause,predicted:n,relevant:e.relevant_laws})}else t.push({id:e.id,description:e.description,incidentType:e.incident_type,incidentCause:e.incident_cause,predicted:[],relevant:e.relevant_laws})}catch(n){console.error("Error fetching laws for ".concat(e.id,":"),n),t.push({id:e.id,description:e.description,incidentType:e.incident_type,incidentCause:e.incident_cause,predicted:[],relevant:e.relevant_laws})}let n=function(e){if(0===e.length)return{precision_at_3:0,precision_at_5:0,recall_at_3:0,recall_at_5:0,f1_at_3:0,f1_at_5:0,mrr:0,ndcg_at_5:0,total_cases:0};let t=0,n=0,s=0,a=0,l=0,c=0,i=0,r=0;for(let o of e){let{predicted:e,relevant:g}=o;t+=d(e,g,3),n+=d(e,g,5),s+=x(e,g,3),a+=x(e,g,5),l+=h(e,g,3),c+=h(e,g,5),i+=m(e,g),r+=p(e,g,5)}let o=e.length;return{precision_at_3:t/o,precision_at_5:n/o,recall_at_3:s/o,recall_at_5:a/o,f1_at_3:l/o,f1_at_5:c/o,mrr:i/o,ndcg_at_5:r/o,total_cases:o}}(t);l(n);var e={version:"v0.".concat(i.length+1),date:new Date().toISOString().split("T")[0],results:n};let s=[...i,e];_(s),localStorage.setItem("eval_history",JSON.stringify(s))}catch(e){C("평가 실행 중 오류가 발생했습니다: "+(e instanceof Error?e.message:String(e)))}finally{t(!1)}},E=async e=>{let t=o.vM.find(t=>t.id===e);if(t)try{var n;let s=await fetch("".concat(f,"/api/law/suggest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({incidentType:t.incident_type,incidentCause:t.incident_cause})}),a=await s.json(),l=a.success&&(null==(n=a.data)?void 0:n.laws)?a.data.laws.map(e=>e.title):[],c=function(e,t){let n=new Set(t),s=e.filter(e=>n.has(e)),a=t.filter(t=>!e.includes(t));return{precision_at_3:d(e,t,3),precision_at_5:d(e,t,5),recall_at_3:x(e,t,3),recall_at_5:x(e,t,5),f1_at_3:h(e,t,3),f1_at_5:h(e,t,5),mrr:m(e,t),ndcg_at_5:p(e,t,5),matched_laws:s,missed_laws:a}}(l,t.relevant_laws);N({testCase:t,metrics:c}),j(e)}catch(e){console.error("Failed to fetch case details:",e)}},F=(()=>{if(i.length<2)return null;let e=i.map(e=>({version:e.version,date:e.date,value:e.results.precision_at_5})),t=i.map(e=>({version:e.version,date:e.date,value:e.results.recall_at_5})),n=i.map(e=>({version:e.version,date:e.date,value:e.results.mrr}));return{precision:y(e,"Precision@5"),recall:y(t,"Recall@5"),mrr:y(n,"MRR"),multi:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:n,height:s,margin:a,gridColor:l,textColor:c}={...g,...t},i=n-a.left-a.right,r=s-a.top-a.bottom,o=Object.keys(e);if(0===o.length)return y([],"데이터 없음",t);let d=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6"],x=Math.max(...o.map(t=>e[t].length));if(0===x)return y([],"데이터 없음",t);let h=u([0,x-1],[0,i]),m=u([0,1],[r,0]),p=[];for(let e=0;e<=1;e+=.2){let t=a.top+m(e);p.push('<line x1="'.concat(a.left,'" y1="').concat(t,'" x2="').concat(a.left+i,'" y2="').concat(t,'" stroke="').concat(l,'" stroke-width="1" stroke-dasharray="4,4"/>')),p.push('<text x="'.concat(a.left-10,'" y="').concat(t+5,'" text-anchor="end" font-size="12" fill="').concat(c,'">').concat(e.toFixed(1),"</text>"))}let f=o.map((t,n)=>{let s=e[t],l=d[n%d.length];if(0===s.length)return"";let c=s.map((e,t)=>{let n=a.left+h(t),s=a.top+m(e.value);return"".concat(0===t?"M":"L"," ").concat(n,",").concat(s)}).join(" "),i=s.map((e,t)=>{let n=a.left+h(t),s=a.top+m(e.value);return'<circle cx="'.concat(n,'" cy="').concat(s,'" r="3" fill="').concat(l,'"/>')}).join("");return'\n      <path d="'.concat(c,'" fill="none" stroke="').concat(l,'" stroke-width="2"/>\n      ').concat(i,"\n    ")}).join(""),_=e[o[0]].map((e,t)=>{let n=a.left+h(t),l=s-a.bottom+20;return'\n      <g>\n        <text x="'.concat(n,'" y="').concat(l,'" text-anchor="middle" font-size="11" fill="').concat(c,'" font-weight="600">\n          ').concat(e.version,'\n        </text>\n        <text x="').concat(n,'" y="').concat(l+15,'" text-anchor="middle" font-size="9" fill="').concat(c,'">\n          ').concat(e.date,"\n        </text>\n      </g>\n    ")}).join(""),b=o.map((e,t)=>{let n=d[t%d.length],l=a.left+120*t,i=s-10;return'\n      <g>\n        <line x1="'.concat(l,'" y1="').concat(i,'" x2="').concat(l+20,'" y2="').concat(i,'" stroke="').concat(n,'" stroke-width="2"/>\n        <text x="').concat(l+25,'" y="').concat(i+4,'" font-size="11" fill="').concat(c,'">').concat(e,"</text>\n      </g>\n    ")}).join("");return'\n    <svg width="'.concat(n,'" height="').concat(s+30,'" xmlns="http://www.w3.org/2000/svg">\n      \x3c!-- 제목 --\x3e\n      <text x="').concat(n/2,'" y="15" text-anchor="middle" font-size="14" font-weight="700" fill="#111827">\n        메트릭 종합 추세\n      </text>\n\n      \x3c!-- 그리드 --\x3e\n      ').concat(p.join("\n"),'\n\n      \x3c!-- 축 --\x3e\n      <line x1="').concat(a.left,'" y1="').concat(a.top,'" x2="').concat(a.left,'" y2="').concat(a.top+r,'" stroke="').concat(c,'" stroke-width="2"/>\n      <line x1="').concat(a.left,'" y1="').concat(a.top+r,'" x2="').concat(a.left+i,'" y2="').concat(a.top+r,'" stroke="').concat(c,'" stroke-width="2"/>\n\n      \x3c!-- 라인 --\x3e\n      ').concat(f,"\n\n      \x3c!-- X축 레이블 --\x3e\n      ").concat(_,"\n\n      \x3c!-- 범례 --\x3e\n      ").concat(b,'\n\n      \x3c!-- 축 제목 --\x3e\n      <text x="').concat(a.left-35,'" y="').concat(a.top+r/2,'" text-anchor="middle" font-size="12" fill="').concat(c,'" transform="rotate(-90, ').concat(a.left-35,", ").concat(a.top+r/2,')">\n        점수\n      </text>\n      <text x="').concat(a.left+i/2,'" y="').concat(s-25,'" text-anchor="middle" font-size="12" fill="').concat(c,'">\n        룰셋 버전\n      </text>\n    </svg>\n  ')}({"Precision@5":e,"Recall@5":t,MRR:n})}})();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c(),{children:(0,s.jsx)("title",{children:"법령 추천 정확도 평가 | Safe OPS Studio"})}),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"⚖️ 법령 추천 정확도 평가"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"골든 데이터셋 기반 정량적 평가"})]}),(0,s.jsx)(r(),{href:"/builder",className:"px-4 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"← Builder로 돌아가기"})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 bg-white p-6 rounded-lg shadow-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"평가 실행"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["골든 데이터셋 ",o.vM.length,"건에 대해 현재 룰셋의 정확도를 평가합니다."]})]}),(0,s.jsx)("button",{onClick:k,disabled:e,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed font-medium transition-colors",children:e?"⏳ 평가 실행 중...":"▶️ 평가 시작"})]}),S&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,s.jsxs)("p",{className:"text-red-600 text-sm",children:["⚠️ ",S]})})]}),n&&(0,s.jsxs)("div",{className:"mb-8 bg-white p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCA 최근 평가 결과"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,s.jsx)(b,{label:"Precision@3",value:n.precision_at_3,description:"상위 3개 중 정답 비율"}),(0,s.jsx)(b,{label:"Recall@3",value:n.recall_at_3,description:"전체 정답 중 찾은 비율"}),(0,s.jsx)(b,{label:"MRR",value:n.mrr,description:"첫 정답의 평균 역순위"}),(0,s.jsx)(b,{label:"NDCG@5",value:n.ndcg_at_5,description:"순서를 고려한 품질"})]}),(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Precision@5"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[(100*n.precision_at_5).toFixed(1),"%"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["F1@5: ",(100*n.f1_at_5).toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Recall@5"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:[(100*n.recall_at_5).toFixed(1),"%"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Total: ",n.total_cases," cases"]})]})]})]}),i.length>0&&(0,s.jsxs)("div",{className:"mb-8 bg-white p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCC8 평가 이력"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"버전"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left font-semibold text-gray-700",children:"날짜"}),(0,s.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-700",children:"P@3"}),(0,s.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-700",children:"R@3"}),(0,s.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-700",children:"P@5"}),(0,s.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-700",children:"R@5"}),(0,s.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-700",children:"MRR"}),(0,s.jsx)("th",{className:"px-4 py-2 text-right font-semibold text-gray-700",children:"NDCG@5"})]})}),(0,s.jsx)("tbody",{children:i.map((e,t)=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-2 font-medium text-gray-900",children:e.version}),(0,s.jsx)("td",{className:"px-4 py-2 text-gray-600",children:e.date}),(0,s.jsxs)("td",{className:"px-4 py-2 text-right text-gray-900",children:[(100*e.results.precision_at_3).toFixed(1),"%"]}),(0,s.jsxs)("td",{className:"px-4 py-2 text-right text-gray-900",children:[(100*e.results.recall_at_3).toFixed(1),"%"]}),(0,s.jsxs)("td",{className:"px-4 py-2 text-right text-gray-900",children:[(100*e.results.precision_at_5).toFixed(1),"%"]}),(0,s.jsxs)("td",{className:"px-4 py-2 text-right text-gray-900",children:[(100*e.results.recall_at_5).toFixed(1),"%"]}),(0,s.jsxs)("td",{className:"px-4 py-2 text-right text-gray-900",children:[(100*e.results.mrr).toFixed(1),"%"]}),(0,s.jsxs)("td",{className:"px-4 py-2 text-right text-gray-900",children:[(100*e.results.ndcg_at_5).toFixed(1),"%"]})]},t))})]})}),(0,s.jsx)("button",{onClick:()=>{confirm("평가 이력을 모두 삭제하시겠습니까?")&&(_([]),localStorage.removeItem("eval_history"))},className:"mt-4 px-4 py-2 text-sm text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors",children:"\uD83D\uDDD1️ 이력 삭제"})]}),F&&(0,s.jsxs)("div",{className:"mb-8 bg-white p-6 rounded-lg shadow-sm",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDCC9 메트릭 추세 그래프"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:F.multi}}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:F.precision}}),(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:F.recall}})]}),(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:F.mrr}})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["\uD83E\uDDEA 골든 데이터셋 (",o.vM.length,"건)"]}),(0,s.jsx)("div",{className:"space-y-3",children:o.vM.map(e=>(0,s.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>E(e.id),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded",children:e.id}),(0,s.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:e.incident_type})]}),(0,s.jsx)("h3",{className:"font-medium text-gray-900",children:e.description}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.incident_cause.substring(0,100),"..."]})]}),(0,s.jsx)("button",{className:"ml-4 text-blue-600 text-sm font-medium hover:text-blue-700",children:"상세보기 →"})]}),(0,s.jsx)("div",{className:"mt-3 flex flex-wrap gap-1",children:e.relevant_laws.map((e,t)=>(0,s.jsxs)("span",{className:"px-2 py-1 bg-green-50 text-green-700 text-xs rounded",children:["✓ ",e]},t))})]},e.id))})]}),w&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-gray-900",children:[w.testCase.id," 상세"]}),(0,s.jsx)("button",{onClick:()=>N(null),className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"사고 설명"}),(0,s.jsx)("p",{className:"text-gray-700",children:w.testCase.description})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"사고 원인"}),(0,s.jsx)("p",{className:"text-gray-700",children:w.testCase.incident_cause})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,s.jsx)(b,{label:"P@3",value:w.metrics.precision_at_3,small:!0}),(0,s.jsx)(b,{label:"R@3",value:w.metrics.recall_at_3,small:!0}),(0,s.jsx)(b,{label:"MRR",value:w.metrics.mrr,small:!0}),(0,s.jsx)(b,{label:"NDCG@5",value:w.metrics.ndcg_at_5,small:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-2",children:["✅ 정답 법령 (",w.testCase.relevant_laws.length,"개)"]}),(0,s.jsx)("div",{className:"space-y-1",children:w.testCase.relevant_laws.map((e,t)=>(0,s.jsx)("div",{className:"px-3 py-2 bg-green-50 text-green-800 text-sm rounded border border-green-200",children:e},t))})]}),w.metrics.matched_laws.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-2",children:["\uD83C\uDFAF 매칭된 법령 (",w.metrics.matched_laws.length,"개)"]}),(0,s.jsx)("div",{className:"space-y-1",children:w.metrics.matched_laws.map((e,t)=>(0,s.jsx)("div",{className:"px-3 py-2 bg-blue-50 text-blue-800 text-sm rounded border border-blue-200",children:e},t))})]}),w.metrics.missed_laws.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-2",children:["❌ 누락된 법령 (",w.metrics.missed_laws.length,"개)"]}),(0,s.jsx)("div",{className:"space-y-1",children:w.metrics.missed_laws.map((e,t)=>(0,s.jsx)("div",{className:"px-3 py-2 bg-red-50 text-red-800 text-sm rounded border border-red-200",children:e},t))})]})]}),(0,s.jsx)("button",{onClick:()=>N(null),className:"mt-6 w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors font-medium",children:"닫기"})]})})]})]})]})}function b(e){let{label:t,value:n,description:a,small:l=!1}=e,c=(100*n).toFixed(1);return(0,s.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg ".concat(l?"":"border border-gray-200"),children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900 ".concat(l?"text-sm":""),children:t}),(0,s.jsxs)("p",{className:"font-bold ".concat(n>=.7?"text-green-600":n>=.5?"text-amber-600":"text-red-600"," ").concat(l?"text-xl":"text-3xl"," mt-1"),children:[c,"%"]}),a&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:a})]})}},4428:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/eval",function(){return n(301)}])}},e=>{e.O(0,[695,636,593,792],()=>e(e.s=4428)),_N_E=e.O()}]);